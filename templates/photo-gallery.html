{/* This is the photo gallery template.*/}

{{define "root"}}
<!doctype html>
<html style="padding-right: 0px;"><head>
    <meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="author" content="ULAPPH Cloud Desktop">
<meta name="viewport" content="width=device-width">
<meta name="description" content="ULAPPH Cloud Desktop is a TimelineJS tool.">
<title>Photo Gallery - ULAPPH Cloud Desktop</title>
<link rel="shortcut icon" href="/static/lib/js/pickadate.js/images/favicon.ico">
<link rel="stylesheet" href="/static/lib/css/pickadate.js/main.css">
<link rel="stylesheet" href="/static/lib/css/pickadate.js/themes/default.css" id="theme_base">
<link rel="stylesheet" href="/static/lib/css/pickadate.js/themes/default.date.css" id="theme_date">
<link rel="stylesheet" href="/static/lib/css/pickadate.js/themes/default.time.css" id="theme_time">
<script src="/static/js/jquery-1.11.1.min.js"></script>
<link rel="stylesheet" href="/static/lib/css/sol/sol.css">
<script type="text/javascript" src="/static/lib/js/sol/sol.js"></script>
<style>
.button {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
}
</style>
<style>
/*the container must be positioned relative:*/
.custom-select {
  position: relative;
  font-family: Arial;
}
.custom-select select {
  display: none; /*hide original SELECT element:*/
}
.select-selected {
  background-color: DodgerBlue;
}
/*style the arrow inside the select element:*/
.select-selected:after {
  position: absolute;
  content: "";
  top: 14px;
  right: 10px;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-color: #fff transparent transparent transparent;
}
/*point the arrow upwards when the select box is open (active):*/
.select-selected.select-arrow-active:after {
  border-color: transparent transparent #fff transparent;
  top: 7px;
}
/*style the items (options), including the selected item:*/
.select-items div,.select-selected {
  color: #ffffff;
  padding: 8px 16px;
  border: 1px solid transparent;
  border-color: transparent transparent rgba(0, 0, 0, 0.1) transparent;
  cursor: pointer;
  user-select: none;
}
/*style items (options):*/
.select-items {
  position: absolute;
  background-color: DodgerBlue;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 99;
}
/*hide the items when the select box is closed:*/
.select-hide {
  display: none;
}
.select-items div:hover, .same-as-selected {
  background-color: rgba(0, 0, 0, 0.1);
}
</style>
<body onload="loadSettings()">
<script>
	var urlParams;
	var match,
		pl     = /\+/g,  // Regex for replacing addition symbol with a space
		search = /([^&=]+)=?([^&]*)/g,
		decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
		query  = window.location.search.substring(1);

	urlParams = {};
	while (match = search.exec(query))
	urlParams[decode(match[1])] = decode(match[2]);
</script>     
<section class="section">
  <div class="section__block section__block--scoped">
    <fieldset class="fieldset">
	  <div class="fieldset__wrapper">
	    <input
	      id="date_demo__accessibility-labels"
	      name="start_date"
	      class="fieldset__input "
	      type="text"
	      placeholder="Start Date..."
	      >
	  </div>
	</fieldset>
    <fieldset class="fieldset">
	  <div class="fieldset__wrapper">
	    <input
	      id=""
	      name="start_time"
	      class="fieldset__input js__timepicker"
	      type="text"
	      value="12:00 AM"
	      >
	  </div>
	</fieldset>
    <fieldset class="fieldset">
	  <div class="fieldset__wrapper">
	    <input
	      id="date_demo__accessibility-labels2"
	      name="end_date"
	      class="fieldset__input "
	      type="text"
	      placeholder="End Date..."
	      >
	  </div>
	</fieldset>
    <fieldset class="fieldset">
	  <div class="fieldset__wrapper">
	    <input
	      id=""
	      name="end_time"
	      class="fieldset__input js__timepicker"
	      type="text"
	      value="11:59 PM"
	      >
	  </div>
	</fieldset>
	<div class="custom-select" style="width:300px;">
		<select id="TYPE" name="TYPE">
			<option value="">Select Type</option>
			<option value="TDSMEDIA">Media Contents</option>
            <option value="CCTV">CCTV Contents</option>
			<!--option value="TDSSLIDE">Slide Contents</option>
			<option value="TDSARTL">Article Contents</option-->
		</select>
	</div>
	<!--div class="custom-select" style="width:300px;"-->
	<div style="width:300px;">
		<select id="CATEGORY" name="category">
			<option value="Select Category">Select Category</option>
		{{.HTM_FILLER1}}
		</select>
		<script type="text/javascript">
		    $(function() {
		        // initialize sol
		        $('#CATEGORY').searchableOptionList();
		    });
		</script>
	</div>
	<input type="text" id="kword" value="{{.STR_FILLER2}}" placeholder="Enter keyword filter..." maxlength=200>
	<input type="submit" class="button" onclick="generateTimeJS()" value="Submit">
	<i>Current time: {{.STR_FILLER1}}</i>
	<hr>
                        Or Display By Year: <select id="YEAR" onchange="selectYear()"><option value="">Select</option></span></h1>
                                  <option value="2000">2000</option>
                                  <option value="2001">2001</option>
                                  <option value="2002">2002</option>
                                  <option value="2003">2003</option>
                                  <option value="2004">2004</option>
                                  <option value="2005">2005</option>
                                  <option value="2006">2006</option>
                                  <option value="2007">2007</option>
                                  <option value="2008">2008</option>
                                  <option value="2009">2009</option>
                                  <option value="2010">2010</option>
                                  <option value="2011">2011</option>
                                  <option value="2012">2012</option>
                                  <option value="2013">2013</option>
                                  <option value="2014">2014</option>
                                  <option value="2015">2015</option>
                                  <option value="2016">2016</option>
                                  <option value="2017">2017</option>
                                  <option value="2018">2018</option>
                                  <option value="2019">2019</option>
                                  <option value="2020">2020</option>
                                  <option value="2021">2021</option>
                                  <option value="2022">2022</option>
                                  <option value="2023">2023</option>
                                  <option value="2024">2024</option>
                                  <option value="2025">2025</option>
                                  <option value="2026">2026</option>
                                  <option value="2027">2027</option>
                                  <option value="2028">2028</option>
                                  <option value="2029">2029</option>
                                  <option value="2030">2030</option>
                        </select>
                        <script>
                                function selectYear() {
									var cat = urlParams["category"];
									var uid = urlParams["uid"];
									/*if (cat == "") {
										cat = "desktop0";
									}*/
									var x = document.getElementById("YEAR").value;
									if (x != "") {
									var str = window.location.href;
									window.location.assign('/media?FUNC_CODE=VIEW_THUMBS&PROC=Y&start_date=1%20January,%20' + x + '&start_time=12:00%20AM&end_date=10%20December,%20' + x + '&end_time=11:59%20PM&cont_type=TDSMEDIA&cont_cat=' + cat + '&kword=' + '&uid=' + uid);
									}
									return
                                };
                        </script>
  </div>
</section>
<script src="/static/lib/js/pickadate.js/picker.js"></script>
<script src="/static/lib/js/pickadate.js/picker.date.js"></script>
<script src="/static/lib/js/pickadate.js/picker.time.js"></script>
<script src="/static/lib/js/pickadate.js/legacy.js"></script>
<script src="/static/lib/js/pickadate.js/main.js"></script>
<script src="/static/lib/js/pickadate.js/rainbow.js"></script>
<script>
	var cType = urlParams["cont_type"];
	selectElement('TYPE', cType)

	function selectElement(id, valueToSelect) {    
		let element = document.getElementById(id);
		element.value = valueToSelect;
	}
</script>
<script>
	function loadSettings() {

		var start_date = localStorage["pg.start_date"];
		document.getElementsByName("start_date")[0].value = start_date;

		var start_time = localStorage["pg.start_time"];
		document.getElementsByName("start_time")[0].value = start_time;

		var end_date = localStorage["pg.end_date"];
		document.getElementsByName("end_date")[0].value = end_date;

		var end_time = localStorage["pg.end_time"];
		document.getElementsByName("end_time")[0].value = end_time;

		var contType = localStorage["pg.TYPE"];
		document.getElementById("TYPE").value = contType;

		var contCat = localStorage["pg.CATEGORY"];
		document.getElementById("CATEGORY").value = contCat;
	}

	function generateTimeJS() {
		//alert("Hello world!");
		var start_date = document.getElementsByName("start_date")[0].value;
		var start_time = document.getElementsByName("start_time")[0].value;
		var end_date = document.getElementsByName("end_date")[0].value;
		var end_time = document.getElementsByName("end_time")[0].value;
		var contType = document.getElementById("TYPE").value;
		var contCat = document.getElementById("CATEGORY").value;
		var uid = urlParams["uid"];
		//save localstorage
		localStorage["pg.start_date"] = start_date;
		localStorage["pg.start_time"] = start_time;
		localStorage["pg.end_date"] = end_date;
		localStorage["pg.end_time"] = end_time;
		localStorage["pg.TYPE"] = contType;
		localStorage["pg.CATEGORY"] = contCat;

		if (contCat == "Select Category") {
			contCat = "";
		}
		var kword = document.getElementById("kword").value;
		if (contType == "") {
			alert("Please populate the content type!");
			return;
		}
		if (start_date == "" || start_time == "" || end_date == "" || end_time == "") {
			alert("Please populate all fields!");
			return;
		}
		var genLink = "/media?FUNC_CODE=VIEW_THUMBS&PROC=Y" + "&start_date=" + start_date + "&start_time=" + start_time + "&end_date=" + end_date + "&end_time=" + end_time + "&cont_type=" + contType + "&cont_cat=" + contCat + "&kword=" + kword + "&uid=" + uid;
		console.log("genLink: "+genLink);
		location.href=genLink;
	}	
	
</script>
<script>
	var x, i, j, selElmnt, a, b, c;
	/*look for any elements with the class "custom-select":*/
	x = document.getElementsByClassName("custom-select");
	for (i = 0; i < x.length; i++) {
	  selElmnt = x[i].getElementsByTagName("select")[0];
	  /*for each element, create a new DIV that will act as the selected item:*/
	  a = document.createElement("DIV");
	  a.setAttribute("class", "select-selected");
	  a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
	  x[i].appendChild(a);
	  /*for each element, create a new DIV that will contain the option list:*/
	  b = document.createElement("DIV");
	  b.setAttribute("class", "select-items select-hide");
	  for (j = 0; j < selElmnt.length; j++) {
	    /*for each option in the original select element,
	    create a new DIV that will act as an option item:*/
	    c = document.createElement("DIV");
	    c.innerHTML = selElmnt.options[j].innerHTML;
	    c.addEventListener("click", function(e) {
	        /*when an item is clicked, update the original select box,
	        and the selected item:*/
	        var y, i, k, s, h;
	        s = this.parentNode.parentNode.getElementsByTagName("select")[0];
	        h = this.parentNode.previousSibling;
	        for (i = 0; i < s.length; i++) {
	          if (s.options[i].innerHTML == this.innerHTML) {
	            s.selectedIndex = i;
	            h.innerHTML = this.innerHTML;
	            y = this.parentNode.getElementsByClassName("same-as-selected");
	            for (k = 0; k < y.length; k++) {
	              y[k].removeAttribute("class");
	            }
	            this.setAttribute("class", "same-as-selected");
	            break;
	          }
	        }
	        h.click();
	    });
	    b.appendChild(c);
	  }
	  x[i].appendChild(b);
	  a.addEventListener("click", function(e) {
	      /*when the select box is clicked, close any other select boxes,
	      and open/close the current select box:*/
	      e.stopPropagation();
	      closeAllSelect(this);
	      this.nextSibling.classList.toggle("select-hide");
	      this.classList.toggle("select-arrow-active");
	    });
	}
	function closeAllSelect(elmnt) {
	  /*a function that will close all select boxes in the document,
	  except the current select box:*/
	  var x, y, i, arrNo = [];
	  x = document.getElementsByClassName("select-items");
	  y = document.getElementsByClassName("select-selected");
	  for (i = 0; i < y.length; i++) {
	    if (elmnt == y[i]) {
	      arrNo.push(i)
	    } else {
	      y[i].classList.remove("select-arrow-active");
	    }
	  }
	  for (i = 0; i < x.length; i++) {
	    if (arrNo.indexOf(i)) {
	      x[i].classList.add("select-hide");
	    }
	  }
	}
	/*if the user clicks anywhere outside the select box,
	then close all select boxes:*/
	document.addEventListener("click", closeAllSelect);
</script>
</body></html>
{{end}}
