{{define "root"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
    <meta charset="utf-8">
    <title>PhotoSwipe</title>
    <link href="/static/lib/css/photoswipe/photoswipe.css?v=4.1.3-1.0.4" rel="stylesheet">
    <link href="/static/lib/css/photoswipe/default-skin.css?v=4.1.3-1.0.4" rel="stylesheet">
</head>
<body translate="no">
<button id="btn">Open PhotoSwipe</button>

<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">

<div class="pswp__container">

<div class="pswp__item"></div>
<div class="pswp__item"></div>
<div class="pswp__item"></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class="pswp__top-bar">

<div class="pswp__counter"></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title="Share"></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>


<div class="pswp__preloader">
<div class="pswp__preloader__icn">
<div class="pswp__preloader__cut">
<div class="pswp__preloader__donut"></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class="pswp__share-tooltip"></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class="pswp__caption">
<div class="pswp__caption__center"></div>
</div>
</div>
</div>
</div>
<script src="/static/lib/js/photoswipe/photoswipe.min.js?v=4.1.3-1.0.4"></script>
<script src="/static/lib/js/photoswipe/photoswipe-ui-default.min.js?v=4.1.3-1.0.4"></script>
<script src="/static/lib/js/humanize/humanize-duration.js"></script>
<script id="rendered-js">
    var openPhotoSwipe = function () {
    var pswpElement = document.querySelectorAll('.pswp')[0];

    // build items array
    /*var items = [
    {
        src: 'https://farm2.staticflickr.com/1043/5186867718_06b2e9e551_b.jpg',
        w: 964,
        h: 1024 },

    {
        src: 'https://farm7.staticflickr.com/6175/6176698785_7dee72237e_b.jpg',
        w: 1024,
        h: 683 }];
    */
    //load images from ls
    var items = [];
    var cctvstream = localStorage["cctv-stream-photos"];
    var ccs = cctvstream.split("@777@");
    //var phtml = "";
    var i;
    for (i = 0; i < ccs.length; i++) {
        var str = ccs[i];
        if (str != "undefined") {
            var spl = str.split("@888@");
            var thisItem = {};
            thisItem.src = spl[1];
            thisItem.w = 964;
            thisItem.h = 1024;
            items.push(thisItem);
        }
    }


    // define options (if needed)
    var options = {
        // history & focus options are disabled on CodePen        
        history: false,
        focus: false,

        showAnimationDuration: 0,
        hideAnimationDuration: 0 };



    var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);
    gallery.init();
    };

    openPhotoSwipe();

    document.getElementById('btn').onclick = openPhotoSwipe;
    </script>
</body>
</html>
{{end}}